{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43803068-e4e7e851cef47a5cf0e066a7d';\nexport const PER_PAGE = 15;\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchPhoto = async (queryString = \"flower\", newPage = 1) => {\n    const searchParams = await axios.get('', {\n        params: {\n            key: API_KEY,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: PER_PAGE,\n            q: queryString,\n            page: newPage,\n        }\n    })\n    return searchParams.data;\n};\n\n","export const galleryMarkup = images => {\n  return images\n    .map(\n      ({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n        />\n      </a>\n      <ul class=\"item-gallery-data\">\n\t\t<li class=\"item-info\">\n\t\t\t<h2 class=\"item-gallery-title\">Likes</h2>\n\t\t\t<p class=\"item-gallery-result\">${likes}</p>\n\t\t</li>\n\t\t<li class=\"item-info\">\n\t\t\t<h2 class=\"item-gallery-title\">Views</h2>\n\t\t\t<p class=\"item-gallery-result\">${views}</p>\n\t\t</li>\n\t\t<li class=\"item-info\">\n\t\t\t<h2 class=\"item-gallery-title\">Comments</h2>\n\t\t\t<p class=\"item-gallery-result\">${comments}</p>\n\t\t</li>\n\t\t<li class=\"item-info\">\n\t\t\t<h2 class=\"item-gallery-title\">Downloads</h2>\n\t\t\t<p class=\"item-gallery-result\">${downloads}</p>\n\t\t</li>\n\t</ul>\n    </li>`)\n    .join('');\n};","import { fetchPhoto, PER_PAGE } from \"./js/pixabay-api.js\";\nimport { galleryMarkup } from \"./js/render-functions.js\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryEl = document.querySelector('.gallery');\nconst searchFormEl = document.querySelector('.myForm');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn')\n\nconst lightboxGallery  = new SimpleLightbox('.gallery a', {\ncaptionsData: 'alt',\ncaptionDelay: 250,\n});\n\nlet searchRequest = null;\nlet photoCurrentPage = 1;\nlet totalPages = 0;\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n    galleryEl.innerHTML = \"\";\n    loadMoreBtnEl.classList.add('d-none')\n\nconst form = event.currentTarget;\n    searchRequest = form.elements.textInput.value.trim();\n    if (searchRequest === '') {\n    iziToast.error({\n        class: 'error',\n        message:  'Please put your request!',\n        position: 'topRight',\n        timeout: 2000,\n    });\n    form.reset();\n    return;\n    }\n    photoCurrentPage = 1;\n        try {\n\n            loaderEl.classList.remove('is-hidden');\n\n    const { hits, totalHits } = await fetchPhoto(searchRequest, photoCurrentPage);\n\n            if (totalHits === 0) {\n        \n        iziToast.error({\n            class: 'error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            timeout: 2000,\n        });\n        form.reset();\n        loaderEl.classList.add('is-hidden');\n        return;\n    }\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryMarkup(hits));\n\n    lightboxGallery.refresh();\n\n    loaderEl.classList.add('is-hidden');\n\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (totalPages > 1) {\n\n        loadMoreBtnEl.classList.remove('d-none');\n    }\n    } catch (error) {\n\n        loaderEl.classList.add('is-hidden');\n\n        iziToast.error({\n            class: 'error',\n            message: 'Search params is not valid!',\n            position: 'topRight',\n            timeout: 2000,\n    });\n    form.reset();\n    return;\n    }\n    \n  form.reset();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n\nconst smoothScroll = () => {\n  const lastPhoto = document.querySelector('.gallery-item');\n  const photoHeight = lastPhoto.getBoundingClientRect().height;\n  const scrollHeight = photoHeight * 2;\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\n\nconst onLoadMorePhoto = async event => {\n    try {\n        photoCurrentPage += 1;\n        console.log(photoCurrentPage)\n        const { hits, totalHits } = await fetchPhoto(searchRequest, photoCurrentPage);\n\n        galleryEl.insertAdjacentHTML('beforeend', galleryMarkup(hits));\n        lightboxGallery.refresh();\n        smoothScroll();\n        loaderEl.classList.add('is-hidden');\n\n        totalPages = Math.ceil(totalHits / PER_PAGE);\n        if (photoCurrentPage < totalPages) {\n        loadMoreBtnEl.classList.remove('d-none');\n    } else {\n    loadMoreBtnEl.classList.add('d-none');\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 2000,\n     });\n    return;\n    }\n  } catch (error) {\n\n        loaderEl.classList.add('is-hidden');\n\n    iziToast.error({\n        message: 'Search params is not valid!',\n        position: 'topRight',\n        timeout: 2000,\n    });\n    form.reset();\n    return;\n  }\n};\n\nloadMoreBtnEl.addEventListener('click', onLoadMorePhoto);"],"names":["BASE_URL","API_KEY","PER_PAGE","axios","fetchPhoto","queryString","newPage","galleryMarkup","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryEl","searchFormEl","loaderEl","loadMoreBtnEl","lightboxGallery","SimpleLightbox","searchRequest","photoCurrentPage","totalPages","onSearchFormSubmit","event","form","iziToast","hits","totalHits","smoothScroll","scrollHeight","onLoadMorePhoto"],"mappings":"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"}